<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Qexo Implementation Status</title>
  </head>

  <body>
    <h1>Qexo Implementation Status</h1>

<p><em>This describes the status of the Qexo version 1.8.91.</em></p>

<h2>Feature Summary</h2>
<p>Qexo 1.8.91 implements most of the core XQuery specification,
and <a href="http://www.w3.org/XML/Query/test-suite/XQTSReportSimple.html">passes over 98%</a>
of the <a href="http://www.w3.org/XML/Query/test-suite/">XQuery Test Suite</a>.
<p>Qexo implements the Full Axis Feature.</p>
<p>Qexo implements the Module Feature.</p>
<p>Qexo implements the Serialization Feature.
However, only some serialization parameters are settable.</p>
<p>Qexo does not implement the Schema Import Feature.</p>
<p>Qexo does not implement the Schema Validation Feature.</p>
<p>Qexo implements some ad-hoc static typing,
but does not implement Static Typing Feature.</p>

<h2>Atomic types</h2>
<p>These subtypes of <code>xs:string</code>
are not yet implemented:
<code>xs:normalizedString</code>, <code>xs:token</code>,
<code>xs:language</code>, <code>xs:NMTOKEN</code>, <code>xs:Name</code>,
<code>xs:NCName</code>, <code>xs:ID</code>, <code>xs:IDREF</code>,
and <code>xs:ENTITY</code>.</p>

<ul>
<li><code>xs:untypedAtomic</code> is implemented using <a href="../kawa/api/gnu/kawa/xml/UntypedAtomic.html"><code>gnu.kawa.xml.UntypedAtomic</code></a>.</li>
<li><code>xs:dateTime</code>, <code>xs:date</code>, <code>xs:time</code>,
<code>xs:gYearMonth</code>, <code>xs:gYear</code>, <code>xs:gMonthDay</code>, <code>xs:gDay</code>, and <code>xs:gMonth</code>
are implemented using <a href="../kawa/api/gnu/math/DateTime.html"><code>gnu.math.DateTime</code></a>.
<li><code>xs:duration</code>, <code>xs:yearMonthDuration</code>,
<code>xs:dayTimeDuration</code> are implemented using <a href="../kawa/api/gnu/math/Duration.html"><code>gnu.math.Duration</code></a>.
<li><code>xs:QName</code> is implemented using <a href="../kawa/api/gnu/mapping/Symbol.html"><code>gnu.mapping.Symbol</code></a>.
<li><code>xs:boolean</code> is implemented using <code>java.lang.Boolean</code>.</li>
<li><code>xs:string</code> is implemented using <code>java.lang.String</code>.</li>
<li><code>xs:integer</code>, <code>xs:positiveInteger</code>,
<code>xs:nonPositiveInteger</code>, <code>xs:negativeInteger</code>,
and <code>xs:nonNegativeInteger</code> are implemented using <a href="../kawa/api/gnu/math/IntNum.html"><code>gnu.math.IntNum</code></a>.</li>
<li><code>xs:long</code>, <code>xs:int</code>, <code>xs:short</code>, <code>xs:byte</code>, <code>xs:unsignedLong</code>, <code>xs:unsignedInt</code>, <code>xs:unsignedShort</code>, <code>xs:unsignedbyte</code> are currently also implemented
using <code>gnu.math.IntNum</code>, but in the future may be implemented using primitive Java types.
<li<code>xs:decimal</code> is implemented using <code>java.math.BigDecimal</code>.</li>
<li><code>xs:base64Binary</code> is implemented using <a href="../kawa/api/gnu/kawa/xml/Base64Binary.html"><code>gnu.kawa.xml.Base64Binary</code></a>.
<li><code>xs:hexBinary</code> is implemented using <a href="../kawa/api/gnu/kawa/xml/HexBinary.html"><code>gnu.kawa.xml.HexBinary</code></a>.
<li><code>xs:anyURI</code> is currently implemented using <code>java.net.URI</code> (or <code>java.lang.String</code> if Qexo is compiled for pre-JDK-1.4).
This is likely to change to using a new type <code>gnu.kawa.util.Path</code>.
<li><code>xs:NOTATION</code> is implemented using
<a href="../kawa/api/gnu/kawa/xml/Notation.html"><code>gnu.kawa.xml.Notation</code></a>.
</ul>

<h2>Expressions</h2>
<p>Except as noted below, all XQuery expression forms are handled.</p>
<p><code>ordered</code>, <code>unordered</code> expressions are
recognized but ignored.</p>
<p><code>validate</code> expressions are not supported.</p>
<p>Extension expressions are impemented, but no extensions
are currently recognized.</p>

<h2>Prologue declarations</h2>

<ul>
<li><code>VersionDecl</code> (<code>xquery version</code>) is handled
but any encoding specification is ignored.
<li><code>VarDecl</code> (<code>declare variable</code>): Ok, including
support for <code>external</code> variables.</li>
<li><code>FunctionDecl</code> (<code>declare function</code>): Ok, though no
support for <code>external</code> functions yet.
Type conversion and casting behavior are uneven:
the special function conversions (such as atomization) are
not done for non-builtin functions.
</li>
<li><code>NamespaceDecl</code> (<code>declare namespace</code>): Ok.
<li><code>DefaultNamespaceDecl</code> (<code>declare default (element/function) namespace</code>): Ok.</li>
<li><code>BoundarySpaceDecl</code> (<code>declare boundary-space</code>): Ok.
<li><code>DefaultCollationDecl</code> (<code>declare default collection</code>): Ok.  The default collection is set in the static context, but so far
nothing uses it.  Also, only the default (code-point) collation works.</li>
<li><code>BaseURIDecl</code> (<code>declare base-uri</code>): Ok.
<li><code>ConstructionDecl</code> (<code>declare construction</code>): Not implemented.
</li>
<li><code>OrderingModeDecl</code> (<code>declare ordering</code>): Ok.
<li><code>EmptyOrderDecl</code> (<code>declare default oder empty</code>): Ok.
<li><code>CopyNamespacesDecl</code> (<code>declare copy-namespaces</code>): Ok.
<li><code>SchemaImport</code> (<code>import scheme</code>): Not implemented.</li>
<li><code>ModuleImport</code> (<code>module import</code>): Works, including support for separate compilation.</li>
<li><code>OptionDecl</code> (<code>declare option</code>): Ok, though
there are no options handled yet.
</ul>

<h2>Standard functions and operators</h2>

<h3>2 Accessors</h3>
<p>These should all work correctly.</p>
<p>Note that <code>nilled</code> always returns false, since Qexo doesn't do validation.</p>
<h3>3 The Error Function</h3>
<p>Ok.</p>
<h3>4 The Trace Function</h3>
<p>Ok.</p>
<h3>5 Constructor Functions</h3>
<p>These should all work correctly.</p>
<h3>6 Functions and Operators on Numerics</h3>
<p>These should all work correctly.</p>
<h3>7 Functions on Strings</h3>
<p>These generally work correctly.
A few of the functions do not support an optional collation argument.</p>
<p>
Strings can contain characters outside the Unicode 16-bite base plane,
and most operations correctly handle such characters using surrogate pairs.
This means that an operation like <code>string-length</code>
has to scan the string to see if there are any surrogate characters,
rather than using the Java <code>String.length()</code> method.
Some of the regex functions require JDK 1.5 or better to correctly
handle surrogate charscters.</p>
<p>
The regular expression (pattern patching) functions use
the Java <code>java.util.regex</code> classes.  These recognize
a pattern syntax which is close to but not identical to that
required by the Schema specification.</p>
<p><code>normalize-unicode</code> only works
if Kawa has been configured and built with <code>--select-java6</code>.

<h3>8 Functions and Operators for anyURI</h3>
<p>These should all work correctly.</p>

<h3>9 Functions and Operators on Boolean Values</h3>
<p>These should all work correctly.</p>

<h3>10 Functions and Operators on Durations, Dates and Times</h3>
<p>These are all implememented and should work correctly.
There a few edge cases not quite right, because we use
<code>java.util.Calendar</code> in the implementation of the date and time
classes, and <code>Calendar</code> doesn't completely match
our needs.</p>

<h3>11 Functions Related to QNames</h3>
<p>These should all work correctly.</p>

<h3>12 Functions and Operators on <code>base64Binary</code> and <code>hexBinary</code></h3>
<p>These should all work correctly.</p>

<h3>13 Functions and Operators on <code>NOTATION</code></h3>
<p>This (i.e. <code>op:NOTATION-equal</code>) should work correctly.</p>

<h3>14 Functions and Operators on Nodes</h3>
<p>These should all work correctly.</p>

<h3>15 Functions and Operators on Sequences</h3>
<p>These generally work fine, expect:</p>
<ul>
<li><code>deep-equal</code> does not take collation into account,
and there are are probably some other data types not handled quite correctly.
<li><code>id</code> works and automatically generates an efficient index the
first time it is called.  However, because Qexo does not do validation,
only attributes named <code>xml:id</code> are recognzied as having
the <code>is-id</code> property.
<li><code>idref</code> always returns the empty sequence.
</ul>

<h3>16 Context Functions</h3>
<p>These should all work.</p>
<h3>17 Casting</h3>
<p>These should all work.</p>

    <hr>
    <address><a href="mailto:per@bothner.com">Per Bothner</a></address>
<!-- Created: Mon Dec 13 17:03:18 PST 2004 -->
<!-- hhmts start -->
Last modified: Wed Dec 22 22:17:37 PST 2004
<!-- hhmts end -->
  </body>
</html>
